<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>CLI Logging - Penetration Testing Notes</title> <link rel="shortcut icon" href="/pen-test-docs/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/pen-test-docs/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/pen-test-docs/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/pen-test-docs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>CLI Logging | Penetration Testing Notes</title> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="CLI Logging" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documented notes and learning for penetration testing and related cyber security testing." /> <meta property="og:description" content="Documented notes and learning for penetration testing and related cyber security testing." /> <link rel="canonical" href="https://alipali737.github.io/pen-test-docs/setting-up/Logging.html" /> <meta property="og:url" content="https://alipali737.github.io/pen-test-docs/setting-up/Logging.html" /> <meta property="og:site_name" content="Penetration Testing Notes" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="CLI Logging" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Documented notes and learning for penetration testing and related cyber security testing.","headline":"CLI Logging","url":"https://alipali737.github.io/pen-test-docs/setting-up/Logging.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <script type="text/javascript" src="/pen-test-docs/assets/js/toggle_init.js"></script> <div class="side-bar"> <div class="site-header"> <a href="/pen-test-docs/" class="site-title lh-tight"> Penetration Testing Notes </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/pen-test-docs/" class="nav-list-link">Home</a></li> <li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/setting-up/setting-up.html" class="nav-list-link active">Setting Up</a><ul class="nav-list"><li class="nav-list-item active"><a href="/pen-test-docs/setting-up/Logging.html" class="nav-list-link active">CLI Logging</a></li> <li class="nav-list-item"><a href="/pen-test-docs/setting-up/Containers.html" class="nav-list-link">Containers</a></li> <li class="nav-list-item"><a href="/pen-test-docs/setting-up/operating-systems.html" class="nav-list-link">Operating Systems</a></li> <li class="nav-list-item"><a href="/pen-test-docs/setting-up/Screenshotting.html" class="nav-list-link">Screenshotting</a></li> <li class="nav-list-item"><a href="/pen-test-docs/setting-up/useful-git-repos.html" class="nav-list-link">Useful Github Repos</a></li> <li class="nav-list-item"><a href="/pen-test-docs/setting-up/virtual-private-servers.html" class="nav-list-link">Virtual Private Servers</a></li> <li class="nav-list-item"><a href="/pen-test-docs/setting-up/Virtualization.html" class="nav-list-link">Virtualization</a></li> </ul> </li> <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Attacks/Attacks%20Index.html" class="nav-list-link">Attacks</a><ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Attacks/osint/OSINT%20Index.html" class="nav-list-link">Open-source Intelligence</a><ul class="nav-list"><li class="nav-list-item"><a href="/pen-test-docs/Attacks/osint/OSINT%20Framework.html" class="nav-list-link">OSINT Framework</a></li> </ul> </li> <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Attacks/sql-injection/SQL%20Injection%20Index.html" class="nav-list-link">SQL Injection</a><ul class="nav-list"><li class="nav-list-item"><a href="/pen-test-docs/Attacks/sql-injection/Introduction.html" class="nav-list-link">Introduction</a></li> <li class="nav-list-item"><a href="/pen-test-docs/Attacks/sql-injection/Basic%20SQL%20Syntax.html" class="nav-list-link">Basic SQL Syntax</a></li> <li class="nav-list-item"><a href="/pen-test-docs/Attacks/sql-injection/SQL%20Injection%20Cheatsheet.html" class="nav-list-link">SQL Injection Cheatsheet</a></li> </ul> </li> <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Attacks/web-application/Web%20Application%20Index.html" class="nav-list-link">Web Application</a><ul class="nav-list"><li class="nav-list-item"><a href="/pen-test-docs/Attacks/web-application/Cross-Site%20Request%20Forgery%20(CSRF).html" class="nav-list-link">Cross-Site Request Forgery (CSRF)</a></li> <li class="nav-list-item"><a href="/pen-test-docs/Attacks/web-application/Cross-Site%20Scripting%20(XSS).html" class="nav-list-link">Cross-Site Scripting (XSS)</a></li> <li class="nav-list-item"><a href="/pen-test-docs/Attacks/web-application/Directory%20Enumeration%20Attack.html" class="nav-list-link">Directory Enumeration Attack</a></li> <li class="nav-list-item"><a href="/pen-test-docs/Attacks/web-application/Server%20Side%20Includes%20(SSI%20Framework)%20(.shtml).html" class="nav-list-link">Server Side Includes (SSI Framework) (.shtml)</a></li> </ul> </li> </ul> </li> <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Knowledge/Knowledge%20Index.html" class="nav-list-link">Knowledge</a><ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Knowledge/Networks/Networks%20Index.html" class="nav-list-link">Networks</a><ul class="nav-list"><li class="nav-list-item"><a href="/pen-test-docs/Knowledge/Networks/TCP-IP%20Framework.html" class="nav-list-link">TCP/IP Framework</a></li> <li class="nav-list-item"><a href="/pen-test-docs/Knowledge/Networks/Wireless%20Network%20Security.html" class="nav-list-link">Wireless Network Security</a></li> </ul> </li> <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Knowledge/Testing/Testing%20Index.html" class="nav-list-link">Testing</a><ul class="nav-list"><li class="nav-list-item"><a href="/pen-test-docs/Knowledge/Testing/Application%20Security%20Testing%20Methods.html" class="nav-list-link">Application Security Testing Methods</a></li> </ul> </li> <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Knowledge/Tools/Tools%20Index.html" class="nav-list-link">Tools</a><ul class="nav-list"><li class="nav-list-item"><a href="/pen-test-docs/Knowledge/Tools/Nmap.html" class="nav-list-link">Nmap</a></li> </ul> </li> </ul> </li> <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Courses/Courses%20Index.html" class="nav-list-link">Courses</a><ul class="nav-list"><li class="nav-list-item"><a href="/pen-test-docs/Courses/Penetration%20Testing%20Fundamentals%20Bootcamp.html" class="nav-list-link">Penetration Testing Fundamentals Bootcamp</a></li> </ul> </li> <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Practice-Labs/labs%20index.html" class="nav-list-link">Practice Labs</a><ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Practice-Labs/overthewire/overthewire%20index.html" class="nav-list-link">OverTheWire</a><ul class="nav-list"><li class="nav-list-item"><a href="/pen-test-docs/Practice-Labs/overthewire/Bandit.html" class="nav-list-link">Bandit Lab</a></li> </ul> </li> <li class="nav-list-item"><a href="/pen-test-docs/Practice-Labs/tryhackme/tryhackme%20index.html" class="nav-list-link">TryHackMe</a></li> <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/pen-test-docs/Practice-Labs/vulnhub/vulnhub%20index.html" class="nav-list-link">VulnHub</a><ul class="nav-list"><li class="nav-list-item"><a href="/pen-test-docs/Practice-Labs/vulnhub/Empire%20-%20Breakout.html" class="nav-list-link">Empire: Breakout CTF</a></li> </ul> </li> </ul> </li> </ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Penetration Testing Notes" aria-label="Search Penetration Testing Notes" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/alipali737/pen-test-docs" class="site-button" > Github Source </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"> <a href="/pen-test-docs/setting-up/setting-up.html">Setting Up</a> </li><li class="breadcrumb-nav-list-item"> <span>CLI Logging</span> </li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="cli-logging"> <a href="#cli-logging" class="anchor-heading" aria-labelledby="cli-logging"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CLI Logging </h1> <hr /> <p>Logging is essential for both documentation and our protection. If third parties attack the company during our penetration test and damage occurs, we can prove that the damage did not result from our activities. For this, we can use the tools <code class="language-plaintext highlighter-rouge">script</code> and <code class="language-plaintext highlighter-rouge">date</code>.</p> <p><code class="language-plaintext highlighter-rouge">Date</code> can be used to display the exact date and time of each command in our command line.</p> <p>With the help of <code class="language-plaintext highlighter-rouge">script</code>, every command and the subsequent result is saved in a background file. To display the date and time, we can replace the <code class="language-plaintext highlighter-rouge">PS1</code> variable in our <code class="language-plaintext highlighter-rouge">.bashrc</code> file with the following content.</p> <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">PS1</span><span class="o">=</span><span class="s2">"</span><span class="se">\[\0</span><span class="s2">33[1;32m</span><span class="se">\]\3</span><span class="s2">42</span><span class="se">\2</span><span class="s2">24</span><span class="se">\2</span><span class="s2">00</span><span class="se">\$</span><span class="s2">([[ </span><span class="se">\$</span><span class="s2">(/opt/vpnbash.sh) == *</span><span class="se">\"</span><span class="s2">10.</span><span class="se">\"</span><span class="s2">* ]] &amp;&amp; echo </span><span class="se">\"</span><span class="s2">[</span><span class="se">\[\0</span><span class="s2">33[1;34m</span><span class="se">\]\$</span><span class="s2">(/opt/vpnserver.sh)</span><span class="se">\[\0</span><span class="s2">33[1;32m</span><span class="se">\]</span><span class="s2">]</span><span class="se">\3</span><span class="s2">42</span><span class="se">\2</span><span class="s2">24</span><span class="se">\2</span><span class="s2">00[</span><span class="se">\[\0</span><span class="s2">33[1;37m</span><span class="se">\]\$</span><span class="s2">(/opt/vpnbash.sh)</span><span class="se">\[\0</span><span class="s2">33[1;32m</span><span class="se">\]</span><span class="s2">]</span><span class="se">\3</span><span class="s2">42</span><span class="se">\2</span><span class="s2">24</span><span class="se">\2</span><span class="s2">00</span><span class="se">\"</span><span class="s2">)[</span><span class="se">\[\0</span><span class="s2">33[1;37m</span><span class="se">\]\u\[\0</span><span class="s2">33[01;32m</span><span class="se">\]</span><span class="s2">@</span><span class="se">\[\0</span><span class="s2">33[01;34m</span><span class="se">\]\h\[\0</span><span class="s2">33[1;32m</span><span class="se">\]</span><span class="s2">]</span><span class="se">\3</span><span class="s2">42</span><span class="se">\2</span><span class="s2">24</span><span class="se">\2</span><span class="s2">00[</span><span class="se">\[\0</span><span class="s2">33[1;37m</span><span class="se">\]\w\[\0</span><span class="s2">33[1;32m</span><span class="se">\]</span><span class="s2">]</span><span class="se">\n\[\0</span><span class="s2">33[1;32m</span><span class="se">\]\3</span><span class="s2">42</span><span class="se">\2</span><span class="s2">24</span><span class="se">\2</span><span class="s2">24</span><span class="se">\3</span><span class="s2">42</span><span class="se">\2</span><span class="s2">24</span><span class="se">\2</span><span class="s2">00</span><span class="se">\3</span><span class="s2">42</span><span class="se">\2</span><span class="s2">24</span><span class="se">\2</span><span class="s2">00</span><span class="se">\3</span><span class="s2">42</span><span class="se">\2</span><span class="s2">25</span><span class="se">\2</span><span class="s2">74 [</span><span class="se">\[\e</span><span class="s2">[01;33m</span><span class="se">\]</span><span class="si">$(</span><span class="nb">date</span> +%D-%r<span class="si">)</span><span class="se">\[\e</span><span class="s2">[01;32m</span><span class="se">\]</span><span class="s2">]</span><span class="se">\\</span><span class="nv">$ </span><span class="se">\[\e</span><span class="s2">[0m</span><span class="se">\]</span><span class="s2">"</span></code></pre></figure> <p>ZSH version</p> <figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">PROMPT</span><span class="o">=</span><span class="s1">'%B┌──(%F{blue}%n@%m%F{reset})─[%F{#FFFFFF}%~%F{reset}]
%B└─%F{red}$%F{#FFFFFF} '</span>
<span class="nv">RPROMPT</span><span class="o">=</span><span class="s1">'[%D{\%d/%m/%Y} %*]'</span></code></pre></figure> <p>This can also be achieved similarly with <code class="language-plaintext highlighter-rouge">Oh-My-ZSH</code> by adding the following in the <code class="language-plaintext highlighter-rouge">.zshrc</code> file.</p> <figure class="highlight"><pre><code class="language-shell" data-lang="shell">autoload <span class="nt">-Uz</span> vcs_info

precmd<span class="o">()</span> <span class="o">{</span>
        <span class="c"># Sets the tab title to current dir</span>
        <span class="nb">echo</span> <span class="nt">-ne</span> <span class="s2">"</span><span class="se">\e</span><span class="s2">]1;</span><span class="k">${</span><span class="nv">PWD</span><span class="p">##*/</span><span class="k">}</span><span class="se">\a</span><span class="s2">"</span>

        vcs_info
<span class="o">}</span>

zstyle <span class="s1">':vcs_info:git:*'</span> formats <span class="s1">'%b'</span>
setopt PROMPT_SUBST

<span class="c"># Configure PROMPT &amp; RPROMPT</span>
<span class="nv">PROMPT</span><span class="o">=</span><span class="s1">'%B┌──[%F{#FFFFFF}%*%F{reset}]─[%F{#FFFFFF}%~%F{reset}]
%B└─[%F{magenta}${vcs_info_msg_0_}%F{reset}]─%F{red}$%F{#FFFFFF} '</span>

<span class="nv">TMOUT</span><span class="o">=</span>1
TRAPALRM<span class="o">()</span> <span class="o">{</span>
        zle reset-prompt
<span class="o">}</span></code></pre></figure> <p>On <strong>Linux</strong> <em>‘script’</em> can be used:</p> <figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">$ </span>script 03-21-2021-0200pm-exploitation.log

<span class="nv">$ </span><span class="nb">exit</span></code></pre></figure> <p>On <strong>Windows</strong> <em>‘Start-Transcript’</em> can be used to log everything run</p> <figure class="highlight"><pre><code class="language-powershell" data-lang="powershell"><span class="n">C:\</span><span class="err">&gt;</span><span class="w"> </span><span class="nx">Start-Transcript</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="s2">"C:\Pentesting\03-21-2021-0200pm-exploitation.log"</span><span class="w">

</span><span class="n">Transcript</span><span class="w"> </span><span class="nx">started</span><span class="p">,</span><span class="w"> </span><span class="nx">output</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="nx">is</span><span class="w"> </span><span class="nx">C:\Pentesting\03-21-2021-0200pm-exploitation.log</span><span class="w">

</span><span class="n">C:\</span><span class="err">&gt;</span><span class="w"> </span><span class="nx">Stop-Transcript</span></code></pre></figure> <p>Recommended to define the name of the log in advance eg. <code class="language-plaintext highlighter-rouge">&lt;date&gt;-&lt;start time&gt;-&lt;name&gt;.log</code></p> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">This page is being build from gh-pages at revision 356325f0939cd0b4bd7a9ff47d8bccd91b417980</p> </footer> </div> </div> <div class="search-overlay"></div> </div> <script type="text/javascript" src="/pen-test-docs/assets/js/toggle_mode.js"></script> </body> </html>
